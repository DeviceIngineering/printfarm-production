<!DOCTYPE html>
<html>
<head>
    <title>–û—á–∏—Å—Ç–∫–∞ PrintFarm Storage</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: linear-gradient(135deg, #06EAFC, #1E1E1E);
            color: white;
            text-align: center;
            padding: 50px;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            margin: 0 auto;
        }
        button {
            background: #06EAFC;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
        }
        button:hover {
            background: #05d0e0;
        }
        .status {
            margin: 20px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .success { background: rgba(0,255,136,0.3); }
        .error { background: rgba(255,0,85,0.3); }
    </style>
</head>
<body>
    <div class="container">
        <h1>üßπ –û—á–∏—Å—Ç–∫–∞ PrintFarm Storage</h1>
        <p>–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—á–∏—Å—Ç–∏—Ç –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è PrintFarm</p>
        
        <button onclick="clearAllStorage()">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
        <button onclick="openMainApp()">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
        
        <div id="status"></div>
    </div>

    <script>
        function clearAllStorage() {
            const statusDiv = document.getElementById('status');
            
            try {
                // –û—á–∏—Å—Ç–∫–∞ localStorage
                localStorage.clear();
                
                // –û—á–∏—Å—Ç–∫–∞ sessionStorage
                sessionStorage.clear();
                
                // –ü–æ–ø—ã—Ç–∫–∞ –æ—á–∏—Å—Ç–∏—Ç—å IndexedDB
                if ('indexedDB' in window) {
                    indexedDB.databases().then(databases => {
                        databases.forEach(db => {
                            indexedDB.deleteDatabase(db.name);
                        });
                    });
                }
                
                // –û—á–∏—Å—Ç–∫–∞ –∫—É–∫–∏ –¥–ª—è —ç—Ç–æ–≥–æ –¥–æ–º–µ–Ω–∞
                document.cookie.split(";").forEach(function(c) { 
                    document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); 
                });
                
                statusDiv.innerHTML = `
                    <div class="status success">
                        ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã!<br>
                        üìç localStorage: –æ—á–∏—â–µ–Ω<br>
                        üìç sessionStorage: –æ—á–∏—â–µ–Ω<br>
                        üìç Cookies: –æ—á–∏—â–µ–Ω—ã<br>
                        üìç IndexedDB: –æ—á–∏—â–µ–Ω
                    </div>
                `;
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(() => {
                    window.location.href = '/';
                }, 2000);
                
            } catch (error) {
                statusDiv.innerHTML = `
                    <div class="status error">
                        ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ: ${error.message}
                    </div>
                `;
            }
        }
        
        function openMainApp() {
            window.location.href = '/';
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        if (window.location.search.includes('auto=true')) {
            clearAllStorage();
        }
    </script>
</body>
</html>