<!DOCTYPE html>
<html>
<head>
    <title>PrintFarm Status Check</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #f5f5f5;
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status { 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 4px; 
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .warning { background: #fff3cd; color: #856404; }
        .info { background: #d1ecf1; color: #0c5460; }
        button { 
            background: #06EAFC; 
            border: none; 
            padding: 10px 20px; 
            margin: 5px; 
            border-radius: 4px; 
            cursor: pointer; 
            font-weight: bold;
        }
        button:hover { background: #05d0e0; }
        pre { 
            background: #f4f4f4; 
            padding: 10px; 
            border-radius: 4px; 
            overflow-x: auto; 
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç PrintFarm Status Check</h1>
        
        <div class="status info">
            <strong>–í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏:</strong> <span id="timestamp"></span>
        </div>
        
        <h2>–î–µ–π—Å—Ç–≤–∏—è:</h2>
        <button onclick="checkDjango()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Django API</button>
        <button onclick="checkReact()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å React</button>
        <button onclick="clearStorage()">–û—á–∏—Å—Ç–∏—Ç—å localStorage</button>
        <button onclick="openMain()">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
        <button onclick="runFullCheck()">–ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</button>
        
        <div id="results"></div>
    </div>

    <script>
        document.getElementById('timestamp').textContent = new Date().toLocaleString('ru-RU');
        
        const resultsDiv = document.getElementById('results');
        
        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            resultsDiv.appendChild(div);
        }
        
        async function checkDjango() {
            log('–ü—Ä–æ–≤–µ—Ä–∫–∞ Django API...', 'info');
            
            try {
                const response = await fetch('http://localhost:8000/api/v1/', {
                    method: 'GET',
                });
                
                if (response.ok) {
                    const data = await response.json();
                    log('‚úÖ Django API —Ä–∞–±–æ—Ç–∞–µ—Ç', 'success');
                    log(`–û—Ç–≤–µ—Ç: <pre>${JSON.stringify(data, null, 2)}</pre>`, 'info');
                } else {
                    log(`‚ùå Django –≤–µ—Ä–Ω—É–ª —Å—Ç–∞—Ç—É—Å: ${response.status}`, 'error');
                }
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ Django: ${error.message}`, 'error');
                log('–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Django —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8000', 'warning');
            }
        }
        
        async function checkReact() {
            log('–ü—Ä–æ–≤–µ—Ä–∫–∞ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...', 'info');
            
            try {
                const response = await fetch('http://localhost:3000/', {
                    method: 'GET',
                    mode: 'no-cors'
                });
                
                log('‚úÖ React —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç', 'success');
                log('–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å http://localhost:3000 –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ', 'info');
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ React: ${error.message}`, 'error');
                log('–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ React —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000', 'warning');
            }
        }
        
        function clearStorage() {
            log('–û—á–∏—Å—Ç–∫–∞ localStorage...', 'info');
            
            try {
                const beforeCount = localStorage.length;
                localStorage.clear();
                sessionStorage.clear();
                
                log(`‚úÖ –û—á–∏—â–µ–Ω–æ ${beforeCount} –∑–∞–ø–∏—Å–µ–π –∏–∑ localStorage`, 'success');
                log('‚úÖ sessionStorage –æ—á–∏—â–µ–Ω', 'success');
                
                // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—á–∏—Å—Ç–∫–∏
                window.open('http://localhost:3000/clear-storage.html?auto=true', '_blank');
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏: ${error.message}`, 'error');
            }
        }
        
        function openMain() {
            log('–û—Ç–∫—Ä—ã—Ç–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...', 'info');
            window.open('http://localhost:3000', '_blank');
        }
        
        async function runFullCheck() {
            log('=== –ù–ê–ß–ê–õ–û –ü–û–õ–ù–û–ô –ü–†–û–í–ï–†–ö–ò ===', 'info');
            
            await checkDjango();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            await checkReact();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            log('=== –ü–û–õ–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê ===', 'info');
            log('–ï—Å–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é', 'success');
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = () => {
            setTimeout(runFullCheck, 1000);
        };
    </script>
</body>
</html>