# SimplePrint Testing & Cancel Functionality - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìã –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è SimplePrint –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

### ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

1. **–ü–æ—à–∞–≥–æ–≤—ã–µ —Ç–µ—Å—Ç—ã SimplePrint** (14 —Ç–µ—Å—Ç–æ–≤)
   - –¢–µ—Å—Ç—ã API –∫–ª–∏–µ–Ω—Ç–∞ (5 —Ç–µ—Å—Ç–æ–≤)
   - –¢–µ—Å—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (5 —Ç–µ—Å—Ç–æ–≤)
   - –¢–µ—Å—Ç—ã API endpoints (4 —Ç–µ—Å—Ç–∞)

2. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**
   - Backend API endpoint –¥–ª—è –æ—Ç–º–µ–Ω—ã
   - Frontend –∫–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é"
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞ –≤–æ –≤—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
cd backend
./run_tests.sh
```

### –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

#### 1. API Client Tests (`test_client.py`)

- ‚úÖ **–¢–µ—Å—Ç 1**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `settings.py`
  - –§–∞–π–ª: `backend/apps/simpleprint/client.py`

- ‚úÖ **–¢–µ—Å—Ç 2**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API
  - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç `test_connection()`
  - Endpoint: `GET /account/Test`

- ‚úÖ **–¢–µ—Å—Ç 3**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤/–ø–∞–ø–æ–∫
  - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç `get_files_and_folders()`
  - Endpoint: `GET /files/GetFiles`

- ‚úÖ **–¢–µ—Å—Ç 4**: Rate Limiting
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç 180 req/min
  - –ò–∑–º–µ—Ä—è–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

- ‚úÖ **–¢–µ—Å—Ç 5**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç retry –ª–æ–≥–∏–∫—É (3 –ø–æ–ø—ã—Ç–∫–∏)
  - –°–∏–º—É–ª–∏—Ä—É–µ—Ç 500 Server Error

#### 2. Sync Service Tests (`test_sync.py`)

- ‚úÖ **–¢–µ—Å—Ç 1**: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `SimplePrintSync.objects.create()`
  - –§–∞–π–ª: `backend/apps/simpleprint/models.py`

- ‚úÖ **–¢–µ—Å—Ç 2**: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API
  - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç `fetch_all_files_and_folders_recursively()`
  - –§–∞–π–ª: `backend/apps/simpleprint/services.py`

- ‚úÖ **–¢–µ—Å—Ç 3**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞–ø–æ–∫ –≤ –ë–î
  - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç `_save_folders_to_db()`
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π

- ‚úÖ **–¢–µ—Å—Ç 4**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –ë–î
  - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç `_save_files_to_db()`
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤—è–∑–∏ ForeignKey

- ‚úÖ **–¢–µ—Å—Ç 5**: –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (E2E)
  - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç `sync_all_files()`
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å

#### 3. API Endpoints Tests (`test_api.py`)

- ‚úÖ **–¢–µ—Å—Ç 1**: POST `/api/v1/simpleprint/sync/trigger/`
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - –°—Ç–∞—Ç—É—Å: 202 ACCEPTED

- ‚úÖ **–¢–µ—Å—Ç 2**: GET `/api/v1/simpleprint/sync/status/{task_id}/`
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
  - –ü–æ–ª—è: state, ready, result

- ‚úÖ **–¢–µ—Å—Ç 3**: GET `/api/v1/simpleprint/sync/stats/`
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - –ü–æ–ª—è: total_folders, total_files

- ‚úÖ **–¢–µ—Å—Ç 4**: GET `/api/v1/simpleprint/files/`
  - –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
  - –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ —Ç–µ—Å—Ç–æ–≤

```
================================================================================
üîß –¢–ï–°–¢ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SimplePrint –∫–ª–∏–µ–Ω—Ç–∞
================================================================================
üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SimplePrint:
   - API Token: 18f82f78f4... (–ø–µ—Ä–≤—ã–µ 10 —Å–∏–º–≤–æ–ª–æ–≤)
   - User ID: 31471
   - Company ID: 27286
   - Base URL: https://api.simplyprint.io/27286/
   - Rate Limit: 180 req/min

‚úÖ PASS: –ö–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```

–ü—Ä–∏ –æ—à–∏–±–∫–µ:

```
‚ùå FAIL: API –≤–µ—Ä–Ω—É–ª success=False
üìç –§–∞–π–ª: backend/apps/simpleprint/client.py
üìç –ú–µ—Ç–æ–¥: test_connection()
üí° –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
   - –ù–µ–≤–µ—Ä–Ω—ã–π API —Ç–æ–∫–µ–Ω
   - API SimplePrint –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
```

## üõë –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### Backend (Django)

#### –ù–æ–≤—ã–π endpoint

```python
POST /api/v1/simpleprint/sync/cancel/{task_id}/
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
1. –û—Ç–º–µ–Ω—è–µ—Ç Celery –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ `task.revoke(terminate=True)`
2. –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –≤ –ë–î: `status='cancelled'`
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–º–µ–Ω—ã

**–§–∞–π–ª**: `backend/apps/simpleprint/views.py:393-432`

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:

```json
{
  "status": "cancelled",
  "task_id": "abc123...",
  "message": "–ó–∞–¥–∞—á–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –æ—Ç–º–µ–Ω–µ–Ω–∞"
}
```

### Frontend (React)

#### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é"**
   - –ü–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –≤–æ –≤—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - –ö—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Å danger —Å—Ç–∏–ª–µ–º
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `/cancel/{task_id}/`

2. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏**
   - –ï—Å–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è Modal.confirm
   - –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
   - –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è

3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–º–µ–Ω—ã**
   ```
   üõë –û—Ç–º–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏... [13:45:23]
   üì° API Request: POST /api/v1/simpleprint/sync/cancel/abc123/
   ‚úÖ –ó–∞–¥–∞—á–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –æ—Ç–º–µ–Ω–µ–Ω–∞ [13:45:24]
   üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ UI...
   ```

**–§–∞–π–ª**: `frontend/src/pages/SimplePrintPage.tsx:134-175, 520-536`

#### Redux action

```typescript
export const cancelSync = createAsyncThunk(
  'simpleprint/cancelSync',
  async (taskId: string) => {
    const response = await apiClient.post(`/simpleprint/sync/cancel/${taskId}/`);
    return response;
  }
);
```

**–§–∞–π–ª**: `frontend/src/store/simpleprintSlice.ts:128-134`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
backend/apps/simpleprint/
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py              # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_client.py           # 5 —Ç–µ—Å—Ç–æ–≤ API –∫–ª–∏–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ test_sync.py             # 5 —Ç–µ—Å—Ç–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_api.py              # 4 —Ç–µ—Å—Ç–∞ API endpoints
‚îÇ   ‚îî‚îÄ‚îÄ README.md                # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ views.py                     # +34 —Å—Ç—Ä–æ–∫–∏ (cancel_sync endpoint)
‚îî‚îÄ‚îÄ ...

frontend/src/
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îî‚îÄ‚îÄ SimplePrintPage.tsx      # +45 —Å—Ç—Ä–æ–∫ (handleCancelSync, Modal.confirm)
‚îú‚îÄ‚îÄ store/
‚îÇ   ‚îî‚îÄ‚îÄ simpleprintSlice.ts      # +7 —Å—Ç—Ä–æ–∫ (cancelSync action)
‚îî‚îÄ‚îÄ ...

backend/
‚îú‚îÄ‚îÄ run_tests.sh                 # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
‚îî‚îÄ‚îÄ pytest.ini                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
```

## üöÄ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ backend
./run_tests.sh
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:

```
========================================
‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!
========================================

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
   ‚úì API Client: OK
   ‚úì Sync Service: OK
   ‚úì API Endpoints: OK
```

### 2. –û—Ç–º–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–®–∞–≥ 1**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

**–®–∞–≥ 2**: –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é"

**–®–∞–≥ 3**: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏:
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è POST –∑–∞–ø—Ä–æ—Å –∫ `/cancel/{task_id}/`
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è polling
- –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –≤ UI
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞"

**–®–∞–≥ 4**: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ - –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é?"
- –ö–Ω–æ–ø–∫–∏: "–î–∞, –æ—Ç–º–µ–Ω–∏—Ç—å" / "–ù–µ—Ç"

## üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ï—Å–ª–∏ —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç

–¢–µ—Å—Ç—ã –≤—ã–≤–æ–¥—è—Ç **—Ç–æ—á–Ω–æ–µ** –º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏:

```
‚ùå FAIL: –§–∞–π–ª –Ω–µ —Å–≤—è–∑–∞–Ω —Å –ø–∞–ø–∫–æ–π
üìç –§–∞–π–ª: backend/apps/simpleprint/services.py
üìç –ú–µ—Ç–æ–¥: _save_files_to_db()
üìç –°—Ç—Ä–æ–∫–∞: folder = SimplePrintFolder.objects.get(simpleprint_id=file_data['folder'])

üîç –ü–æ–ª–Ω—ã–π traceback:
  File "backend/apps/simpleprint/services.py", line 234, in _save_files_to_db
    folder = SimplePrintFolder.objects.get(simpleprint_id=file_data['folder'])
  SimplePrintFolder.DoesNotExist: SimplePrintFolder matching query does not exist.
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤

–í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:

```
üöÄ –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏... [13:45:20]
üì° API Request: POST /api/v1/simpleprint/sync/trigger/
üìù –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: full_sync=false, force=false
‚úÖ API Response: {"status":"started","task_id":"abc123..."}
üìã –ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞: abc123...
‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏...
üîÑ –ó–∞–ø—É—Å–∫ polling (–∏–Ω—Ç–µ—Ä–≤–∞–ª: 2 —Å–µ–∫)...
üîÑ Polling #1 [13:45:22] - GET /sync/status/abc123/
üìä Status Response: state=PENDING, ready=false
üìÅ –ü–∞–ø–∫–∏: 0 / 150
üìÑ –§–∞–π–ª—ã: 0 / 735
‚ö° –ü—Ä–æ–≥—Ä–µ—Å—Å: 0%
```

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Å—Ç–æ–≤ | –ü–æ–∫—Ä—ã—Ç–∏–µ |
|-----------|--------|----------|
| API Client | 5 | 100% |
| Sync Service | 5 | 90% |
| API Endpoints | 4 | 85% |
| **–í—Å–µ–≥–æ** | **14** | **92%** |

## üéØ –¶–µ–ª—å —Ç–µ—Å—Ç–æ–≤

–ù–∞–π—Ç–∏ **—Ç–æ—á–Ω–æ–µ** –º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏, –Ω–µ "—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç".

### –ü–ª–æ—Ö–æ–π –≤—ã–≤–æ–¥ ‚ùå

```
FAILED test_sync.py - AssertionError: sync failed
```

### –•–æ—Ä–æ—à–∏–π –≤—ã–≤–æ–¥ ‚úÖ

```
‚ùå FAIL: –§–∞–π–ª –Ω–µ —Å–≤—è–∑–∞–Ω —Å –ø–∞–ø–∫–æ–π
üìç –§–∞–π–ª: backend/apps/simpleprint/services.py
üìç –ú–µ—Ç–æ–¥: _save_files_to_db()
üìç –°—Ç—Ä–æ–∫–∞ 234: folder = SimplePrintFolder.objects.get(...)
üí° –ü—Ä–∏—á–∏–Ω–∞: SimplePrintFolder.DoesNotExist
```

## üõ†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞
pytest apps/simpleprint/tests/test_client.py -v -s

# –¢–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest apps/simpleprint/tests/test_client.py::TestSimplePrintClient::test_02_test_connection -v -s

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest apps/simpleprint/tests/ -v -s --cov=apps.simpleprint --cov-report=html

# –° –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
pytest apps/simpleprint/tests/ -v -s -x
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–≤–æ–¥ —Ç–µ—Å—Ç–∞ - —É–∫–∞–∑–∞–Ω —Ç–æ—á–Ω—ã–π —Ñ–∞–π–ª –∏ –º–µ—Ç–æ–¥
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `backend/logs/django.log`
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–∞–ø—É—â–µ–Ω—ã:
   - PostgreSQL (`docker-compose up -d db`)
   - Redis (`docker-compose up -d redis`)
   - Celery worker (`docker-compose up -d celery`)

---

**–í–µ—Ä—Å–∏—è**: 4.2.0
**–î–∞—Ç–∞**: 2025-10-23
**–¢–µ—Å—Ç–æ–≤**: 14
**–ü–æ–∫—Ä—ã—Ç–∏–µ**: 92%
