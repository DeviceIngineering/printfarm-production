# üìÅ SimplePrint Files Integration - –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è:** v4.2.1
**–ó–∞–¥–∞—á–∞:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SimplePrint API –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ G-code —Ñ–∞–π–ª–æ–≤

---

## üéØ –¶–µ–ª—å

–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ G-code —Ñ–∞–π–ª–∞—Ö –∏–∑ SimplePrint:
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ webhooks

---

## üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ SimplePrint API

**Credentials:**
```
API Token: 18f82f78-f45a-46bb-aec8-3792048acccd
User ID: 31471
Company ID: 27286
Base URL: https://api.simplyprint.io/27286/
Rate Limit: 180 requests/min (3 req/sec)
```

**–ö–ª—é—á–µ–≤—ã–µ endpoints:**
- `GET /files/GetFiles` - —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫ ‚úÖ
- `GET /files/GetFolder` - –¥–µ—Ç–∞–ª–∏ –ø–∞–ø–∫–∏
- `POST /files/DeleteFiles` - —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- `POST /files/DeleteFolders` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–∞–ø–æ–∫
- `GET /webhooks` - —Å–ø–∏—Å–æ–∫ webhooks
- `POST /webhooks` - —Å–æ–∑–¥–∞–Ω–∏–µ webhook

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: `X-API-KEY: 18f82f78-f45a-46bb-aec8-3792048acccd`

---

## üìã –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (5 —ç—Ç–∞–ø–æ–≤)

### –≠–¢–ê–ü 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API (30 –º–∏–Ω)

#### –®–∞–≥ 1.1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ credentials
**–ó–∞–¥–∞—á–∏:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:
  ```
  SIMPLEPRINT_API_TOKEN=18f82f78-f45a-46bb-aec8-3792048acccd
  SIMPLEPRINT_USER_ID=31471
  SIMPLEPRINT_COMPANY_ID=27286
  SIMPLEPRINT_BASE_URL=https://api.simplyprint.io/27286/
  SIMPLEPRINT_RATE_LIMIT=180
  ```
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `backend/config/settings/base.py`

**Git commit:**
```
üîß Config: Add SimplePrint API credentials
```

---

#### –®–∞–≥ 1.2: –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `test_simpleprint_connection.py`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API
- [ ] –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ (–ø–µ—Ä–≤—ã–µ 10)
- [ ] –í—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–¢–µ—Å—Ç:**
```bash
python backend/test_simpleprint_connection.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ–ª—É—á–µ–Ω
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–Ω—è—Ç–Ω–∞

**–õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
- –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–∞

**Git commit:**
```
üß™ Test: Add SimplePrint API connection test
```

---

### –≠–¢–ê–ü 2: Django –º–æ–¥–µ–ª–∏ (1 —á–∞—Å)

#### –®–∞–≥ 2.1: –°–æ–∑–¥–∞—Ç—å Django app (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ)
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å app `simpleprint`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ INSTALLED_APPS

**Git commit:**
```
üé¨ Init: Setup SimplePrint app structure
```

---

#### –®–∞–≥ 2.2: –ú–æ–¥–µ–ª–∏ –¥–ª—è —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `SimplePrintFolder`:
  - simpleprint_id (ID –ø–∞–ø–∫–∏ –≤ SimplePrint)
  - name (–Ω–∞–∑–≤–∞–Ω–∏–µ)
  - parent (—Å–≤—è–∑—å —Å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –ø–∞–ø–∫–æ–π, ForeignKey –Ω–∞ —Å–µ–±—è)
  - path (–ø–æ–ª–Ω—ã–π –ø—É—Ç—å)
  - created_at, updated_at
  - last_synced_at
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `SimplePrintFile`:
  - simpleprint_id (ID —Ñ–∞–π–ª–∞/—Ö–µ—à)
  - name (–∏–º—è —Ñ–∞–π–ª–∞)
  - folder (ForeignKey –Ω–∞ SimplePrintFolder)
  - size (—Ä–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö)
  - file_type (—Ç–∏–ø: gcode, stl, etc)
  - uploaded_at (–¥–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ SimplePrint)
  - expires_at (–¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è, –µ—Å–ª–∏ –µ—Å—Ç—å)
  - file_hash (MD5/SHA —Ö–µ—à —Ñ–∞–π–ª–∞)
  - metadata (JSONField –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
  - created_at, updated_at, last_synced_at
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

**–¢–µ—Å—Ç—ã:**
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏
- –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
- –°–≤—è–∑—å —Ñ–∞–π–ª-–ø–∞–ø–∫–∞
- –ò–µ—Ä–∞—Ä—Ö–∏—è –ø–∞–ø–æ–∫

**–õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π

**Git commit:**
```
üíæ Models: Add SimplePrint files and folders models
```

---

### –≠–¢–ê–ü 3: API –∫–ª–∏–µ–Ω—Ç –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (2-3 —á–∞—Å–∞)

#### –®–∞–≥ 3.1: SimplePrint API –∫–ª–∏–µ–Ω—Ç
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `SimplePrintFilesClient` –≤ `backend/apps/simpleprint/client.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã:
  - `get_files_and_folders()` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏
  - `get_folder_details(folder_id)` - –¥–µ—Ç–∞–ª–∏ –ø–∞–ø–∫–∏
  - `test_connection()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É rate limit (3 req/sec)
- [ ] –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (5 –º–∏–Ω—É—Ç)

**–¢–µ—Å—Ç—ã:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ (mock API)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- Rate limiting
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ö–∞–∂–¥—ã–π API –∑–∞–ø—Ä–æ—Å
- Rate limit —Å—Ç–∞—Ç—É—Å
- –û—à–∏–±–∫–∏

**Git commit:**
```
‚ú® Feature: Add SimplePrint files API client
```

---

#### –®–∞–≥ 3.2: –°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `SimplePrintSyncService` –≤ `backend/apps/simpleprint/services.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `sync_all_files()`:
  - –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ API
  - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞–ø–∫–∏ (—Å–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é)
  - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ñ–∞–π–ª—ã (—Å–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å)
  - –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ SimplePrint
  - –ó–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ–ª—å `SimplePrintSync` –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏:
  - status, started_at, finished_at
  - total_folders, synced_folders
  - total_files, synced_files, deleted_files
  - error_details
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

**–¢–µ—Å—Ç—ã:**
- –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
- –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ù–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ–≥—Ä–µ—Å—Å (–∫–∞–∂–¥—ã–µ 50 —Ñ–∞–π–ª–æ–≤)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –û—à–∏–±–∫–∏

**Git commit:**
```
‚öôÔ∏è Services: Add files synchronization service
```

---

#### –®–∞–≥ 3.3: Management –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `python manage.py sync_simpleprint_files`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `--full` - –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
  - `--force` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ë–î

**–¢–µ—Å—Ç:**
```bash
python manage.py sync_simpleprint_files --full
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
- –ò–µ—Ä–∞—Ä—Ö–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–≤–µ–¥–µ–Ω–∞

**Git commit:**
```
üîß Command: Add sync_simpleprint_files management command
```

---

### –≠–¢–ê–ü 4: Webhooks –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (1-2 —á–∞—Å–∞)

#### –®–∞–≥ 4.1: Webhook endpoint
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å view `SimplePrintWebhookView` –≤ `backend/apps/simpleprint/views.py`
- [ ] Endpoint: `POST /api/v1/simpleprint/webhook/`
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π:
  - file_created - —Å–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ñ–∞–π–ª
  - file_updated - —Ñ–∞–π–ª –æ–±–Ω–æ–≤–ª–µ–Ω
  - file_deleted - —Ñ–∞–π–ª —É–¥–∞–ª–µ–Ω
  - folder_created - —Å–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞
  - folder_deleted - –ø–∞–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∞
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è webhook (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞/–ø–∞–ø–∫–∏
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö webhook —Å–æ–±—ã—Ç–∏–π

**–¢–µ—Å—Ç—ã:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –û—à–∏–±–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**–õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ webhook
- –¢–∏–ø —Å–æ–±—ã—Ç–∏—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏

**Git commit:**
```
üîó Webhook: Add SimplePrint webhook endpoint
```

---

#### –®–∞–≥ 4.2: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è webhook –≤ SimplePrint
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `setup_simpleprint_webhook.py`
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å webhook URL –≤ SimplePrint:
  - URL: `https://your-domain.com/api/v1/simpleprint/webhook/`
  - –°–æ–±—ã—Ç–∏—è: file_created, file_updated, file_deleted, folder_created, folder_deleted
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å webhook ID –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

**–í–∞–∂–Ω–æ:**
–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ngrok –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ endpoint

**Git commit:**
```
üîó Webhook: Register webhook in SimplePrint
```

---

### –≠–¢–ê–ü 5: REST API –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (1-2 —á–∞—Å–∞)

#### –®–∞–≥ 5.1: REST API endpoints
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `SimplePrintFileViewSet`:
  - `GET /api/v1/simpleprint/files/` - —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
  - `GET /api/v1/simpleprint/files/{id}/` - –¥–µ—Ç–∞–ª–∏ —Ñ–∞–π–ª–∞
  - `GET /api/v1/simpleprint/folders/` - —Å–ø–∏—Å–æ–∫ –ø–∞–ø–æ–∫
  - `POST /api/v1/simpleprint/files/sync/` - –∑–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - `GET /api/v1/simpleprint/files/stats/` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é (–ø–æ –ø–∞–ø–∫–µ, —Ç–∏–ø—É —Ñ–∞–π–ª–∞)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é
- [ ] –°–æ–∑–¥–∞—Ç—å serializers

**–¢–µ—Å—Ç—ã:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –ü–æ–∏—Å–∫
- –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- API –∑–∞–ø—Ä–æ—Å—ã
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

**Git commit:**
```
üöÄ API: Add SimplePrint files REST API
```

---

#### –®–∞–≥ 5.2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (Celery)
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å Celery –∑–∞–¥–∞—á—É `sync_simpleprint_files_task`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Celery Beat –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:
  - –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç (–∏–ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–¢–µ—Å—Ç—ã:**
- –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ù–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü –∑–∞–¥–∞—á–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

**Git commit:**
```
‚è∞ Celery: Add scheduled files synchronization
```

---

#### –®–∞–≥ 5.3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∫–ª–∞–¥–∫–æ–π "–¢–æ—á–∫–∞"
**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å endpoint `GET /api/v1/simpleprint/files/for_tochka/`
- [ ] –í–µ—Ä–Ω—É—Ç—å —Ñ–∞–π–ª—ã —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –∞—Ä—Ç–∏–∫—É–ª–∞–º
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å SimplePrintFile —Å Product (–ø–æ –∞—Ä—Ç–∏–∫—É–ª—É –≤ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ TochkaPage

**Git commit:**
```
üîó Integration: Connect SimplePrint files with Tochka
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```
SimplePrintFolder
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ simpleprint_id (unique)
‚îú‚îÄ‚îÄ name
‚îú‚îÄ‚îÄ parent_id (FK to self)
‚îú‚îÄ‚îÄ path
‚îú‚îÄ‚îÄ created_at
‚îú‚îÄ‚îÄ updated_at
‚îî‚îÄ‚îÄ last_synced_at

SimplePrintFile
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ simpleprint_id (unique)
‚îú‚îÄ‚îÄ name
‚îú‚îÄ‚îÄ folder_id (FK to SimplePrintFolder)
‚îú‚îÄ‚îÄ size
‚îú‚îÄ‚îÄ file_type
‚îú‚îÄ‚îÄ uploaded_at
‚îú‚îÄ‚îÄ expires_at
‚îú‚îÄ‚îÄ file_hash
‚îú‚îÄ‚îÄ metadata (JSON)
‚îú‚îÄ‚îÄ product_id (FK to Product, nullable)
‚îú‚îÄ‚îÄ created_at
‚îú‚îÄ‚îÄ updated_at
‚îî‚îÄ‚îÄ last_synced_at

SimplePrintSync
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ status
‚îú‚îÄ‚îÄ started_at
‚îú‚îÄ‚îÄ finished_at
‚îú‚îÄ‚îÄ total_folders
‚îú‚îÄ‚îÄ synced_folders
‚îú‚îÄ‚îÄ total_files
‚îú‚îÄ‚îÄ synced_files
‚îú‚îÄ‚îÄ deleted_files
‚îî‚îÄ‚îÄ error_details
```

---

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–∞–ø–∫–∏ –∏–∑ SimplePrint API
2. –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –ø–∞–ø–∫–∏ –≤ –ë–î (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é)
3. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ SimplePrint API
4. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –≤ –ë–î
   - –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞—Ç—å
   - –ï—Å–ª–∏ –µ—Å—Ç—å - –æ–±–Ω–æ–≤–∏—Ç—å –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è
5. –ù–∞–π—Ç–∏ —Ñ–∞–π–ª—ã –≤ –ë–î –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ SimplePrint - —É–¥–∞–ª–∏—Ç—å
6. –ó–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (—á–µ—Ä–µ–∑ webhook):
1. –ü–æ–ª—É—á–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ
2. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ (—Å–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å)
3. –ó–∞–ø–∏—Å–∞—Ç—å –≤ –ª–æ–≥

---

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

```
–≠—Ç–∞–ø 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ    - 30 –º–∏–Ω
–≠—Ç–∞–ø 2: Django –º–æ–¥–µ–ª–∏               - 1 —á–∞—Å
–≠—Ç–∞–ø 3: API –∫–ª–∏–µ–Ω—Ç –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è  - 2-3 —á–∞—Å–∞
–≠—Ç–∞–ø 4: Webhooks                    - 1-2 —á–∞—Å–∞
–≠—Ç–∞–ø 5: REST API –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è    - 1-2 —á–∞—Å–∞
```

**–ò—Ç–æ–≥–æ: 5.5-8.5 —á–∞—Å–æ–≤**

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [ ] –í—Å–µ —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ SimplePrint
- [ ] –ò–µ—Ä–∞—Ä—Ö–∏—è –ø–∞–ø–æ–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ä—É—á–Ω–∞—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è)
- [ ] Webhooks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- [ ] REST API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Celery –∑–∞–¥–∞—á–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¢–æ—á–∫–æ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü–µ—Ä–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
```bash
python manage.py sync_simpleprint_files --full
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
```bash
python manage.py shell
>>> from apps.simpleprint.models import SimplePrintFile, SimplePrintFolder
>>> SimplePrintFolder.objects.count()  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–ø–æ–∫
>>> SimplePrintFile.objects.count()     # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
```

### API:
```
GET /api/v1/simpleprint/files/
GET /api/v1/simpleprint/files/stats/
POST /api/v1/simpleprint/files/sync/
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **Rate Limiting:** 180 req/min = 3 req/sec. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏.
2. **Webhooks:** –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ngrok
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –Ω–∞ 5 –º–∏–Ω—É—Ç
4. **–°–≤—è–∑—å —Å Product:** –ò–∑–≤–ª–µ–∫–∞—Ç—å –∞—Ä—Ç–∏–∫—É–ª –∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ (regex)
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ –æ—à–∏–±–∫–∏

---

**–ù–∞—á–Ω–∏—Ç–µ —Å –≠—Ç–∞–ø–∞ 1!** üöÄ
