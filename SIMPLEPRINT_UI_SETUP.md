# üéØ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ SimplePrint

## ‚úÖ –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

**–î–∞—Ç–∞**: 2025-10-28
**Endpoint**: `http://kemomail3.keenetic.pro:13000/api/v1/simpleprint/webhook/`
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í** –∫ –ø—Ä–∏–µ–º—É webhooks

### –ß—Ç–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:
- ‚úÖ Endpoint –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ (HTTP 200)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (—Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã)
- ‚úÖ –°–æ–±—ã—Ç–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (job.started ‚Üí job_started)
- ‚úÖ –°–æ–±—ã—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ 8+ —Å–æ–±—ã—Ç–∏–π)
- ‚úÖ –í—Å–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π —Ä–∞–±–æ—Ç–∞—é—Ç:
  - job.started ‚Üí job_started ‚úÖ
  - job.finished ‚Üí job_completed ‚úÖ
  - job.failed ‚Üí job_failed ‚úÖ
  - printer.state_changed ‚Üí printer_state_changed ‚úÖ
  - queue.changed ‚Üí queue_changed ‚úÖ

---

## üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ SimplePrint UI

### –®–∞–≥ 1: –í—Ö–æ–¥ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://simplyprint.io
2. –ù–∞–∂–º–∏—Ç–µ **"Login"** / **"Sign In"**
3. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
   - Email –∏–ª–∏ Username
   - Password
4. –ù–∞–∂–º–∏—Ç–µ **"Log In"**

---

### –®–∞–≥ 2: –ü–æ–∏—Å–∫ —Ä–∞–∑–¥–µ–ª–∞ Webhooks

–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—â–∏—Ç–µ —Ä–∞–∑–¥–µ–ª Webhooks –≤ –æ–¥–Ω–æ–º –∏–∑ —ç—Ç–∏—Ö –º–µ—Å—Ç:

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Settings
```
–ú–µ–Ω—é ‚Üí Settings ‚Üí Integrations ‚Üí Webhooks
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Developer
```
–ú–µ–Ω—é ‚Üí Settings ‚Üí Developer ‚Üí Webhooks
```

#### –í–∞—Ä–∏–∞–Ω—Ç C: –ß–µ—Ä–µ–∑ Company Settings
```
–ú–µ–Ω—é ‚Üí Company Settings ‚Üí Webhooks
```

#### –í–∞—Ä–∏–∞–Ω—Ç D: –ß–µ—Ä–µ–∑ API Section
```
–ú–µ–Ω—é ‚Üí Settings ‚Üí API ‚Üí Webhooks
```

**üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∏—Å–∫ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö (–æ–±—ã—á–Ω–æ –∏–∫–æ–Ω–∫–∞ üîç), –≤–≤–µ–¥–∏—Ç–µ "webhook" –∏–ª–∏ "webhooks"

---

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π Webhook

–ù–∞–π–¥—è —Ä–∞–∑–¥–µ–ª Webhooks, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ webhook:
- **"Add Webhook"**
- **"Create Webhook"**
- **"New Webhook"**
- **"+"** (–ø–ª—é—Å)

---

### –®–∞–≥ 4: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è webhook

#### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:**

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|------|----------|------------|
| **Name** / **–ù–∞–∑–≤–∞–Ω–∏–µ** | `PrintFarm Planning V2` | –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∏–º—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| **URL** / **Endpoint URL** | `http://kemomail3.keenetic.pro:13000/api/v1/simpleprint/webhook/` | ‚ö†Ô∏è –í–ê–ñ–ù–û: –¢–æ—á–Ω—ã–π URL, –ù–ï admin URL! |
| **Method** | `POST` | –ú–µ—Ç–æ–¥ HTTP –∑–∞–ø—Ä–æ—Å–∞ |
| **Content-Type** | `application/json` | –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö |
| **Active** / **Enabled** | ‚úÖ –í–∫–ª—é—á–µ–Ω–æ | –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å webhook —Å—Ä–∞–∑—É |

#### **‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**

**–ü–†–ê–í–ò–õ–¨–ù–´–ô URL:**
```
http://kemomail3.keenetic.pro:13000/api/v1/simpleprint/webhook/
```

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ï URL (–ù–ï –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï):**
```
http://kemomail3.keenetic.pro:13000/admin/simpleprint/...  ‚ùå –≠—Ç–æ admin, –ù–ï API!
http://kemomail3.keenetic.pro:18001/...                    ‚ùå –ü–æ—Ä—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω!
https://kemomail3.keenetic.pro:13000/...                   ‚ùå –ù–µ—Ç HTTPS (–ø–æ–∫–∞)
```

---

### –®–∞–≥ 5: –í—ã–±—Ä–∞—Ç—å —Å–æ–±—ã—Ç–∏—è (Events)

–û—Ç–º–µ—Ç—å—Ç–µ –≤—Å–µ —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç—å:

#### üñ®Ô∏è –°–æ–±—ã—Ç–∏—è –ø—Ä–∏–Ω—Ç–µ—Ä–∞:
- ‚òëÔ∏è **printer.online** - –ü—Ä–∏–Ω—Ç–µ—Ä –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è
- ‚òëÔ∏è **printer.offline** - –ü—Ä–∏–Ω—Ç–µ—Ä –æ—Ç–∫–ª—é—á–∏–ª—Å—è
- ‚òëÔ∏è **printer.state_changed** - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏–Ω—Ç–µ—Ä–∞

#### üìÑ –°–æ–±—ã—Ç–∏—è –∑–∞–¥–∞–Ω–∏–π (Jobs):
- ‚òëÔ∏è **job.started** - –ù–∞—á–∞–ª–æ –ø–µ—á–∞—Ç–∏
- ‚òëÔ∏è **job.finished** / **job.completed** - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–µ—á–∞—Ç–∏
- ‚òëÔ∏è **job.paused** - –ü–∞—É–∑–∞ –ø–µ—á–∞—Ç–∏
- ‚òëÔ∏è **job.resumed** - –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—á–∞—Ç–∏
- ‚òëÔ∏è **job.cancelled** - –û—Ç–º–µ–Ω–∞ –∑–∞–¥–∞–Ω–∏—è
- ‚òëÔ∏è **job.failed** - –û—à–∏–±–∫–∞ –ø–µ—á–∞—Ç–∏

#### üìä –°–æ–±—ã—Ç–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:
- ‚òëÔ∏è **job.progress** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–µ—á–∞—Ç–∏ (–∫–∞–∂–¥—ã–µ 10% –∏–ª–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏)

#### üìã –°–æ–±—ã—Ç–∏—è –æ—á–µ—Ä–µ–¥–∏ (Queue):
- ‚òëÔ∏è **queue.changed** - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏
- ‚òëÔ∏è **queue.item_added** - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å
- ‚òëÔ∏è **queue.item_deleted** - –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
- ‚òëÔ∏è **queue.item_moved** - –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥–∏

**üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –û—Ç–º–µ—Ç—å—Ç–µ –í–°–ï –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω—É–∂–Ω—ã–µ.

---

### –®–∞–≥ 6: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Authentication)

**–ï—Å–ª–∏ SimplePrint –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Custom Headers:**

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------|----------|
| **Header Name** | `X-SP-Token` |
| **Header Value** | `<–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_—Ç–æ–∫–µ–Ω>` |

**–ï—Å–ª–∏ –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:**
- –û—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–µ –ø—É—Å—Ç—ã–º
- –ù–∞—à endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (AllowAny)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞. Endpoint –∑–∞—â–∏—â–µ–Ω –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ç–∏ (–ø–æ—Ä—Ç 13000 –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è SimplePrint —Å–µ—Ä–≤–µ—Ä–æ–≤).

---

### –®–∞–≥ 7: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å webhook

–ù–∞–∂–º–∏—Ç–µ:
- **"Save"**
- **"Create"**
- **"Add"**
- **"Submit"**

SimplePrint –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:
- ‚úÖ "Webhook created successfully"
- ‚úÖ "Webhook saved"

---

### –®–∞–≥ 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook

–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –Ω–∞–π–¥–∏—Ç–µ –≤–∞—à webhook –≤ —Å–ø–∏—Å–∫–µ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –µ–≥–æ:

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ö–Ω–æ–ø–∫–∞ "Test" –≤ SimplePrint UI
1. –í —Å–ø–∏—Å–∫–µ webhooks –Ω–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π webhook
2. –ù–∞–∂–º–∏—Ç–µ **"Test"** / **"Send Test Event"** / **"Trigger Test"**
3. SimplePrint –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ SimplePrint –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: "Success" –∏–ª–∏ "200 OK"
- ‚úÖ –ó–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ –∏–ª–∏ —Å—Ç–∞—Ç—É—Å "Active"

#### –í–∞—Ä–∏–∞–Ω—Ç B: –†–µ–∞–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—á–∞—Ç—å –Ω–∞ –ª—é–±–æ–º –ø—Ä–∏–Ω—Ç–µ—Ä–µ
2. SimplePrint –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç `job.started` webhook
3. –ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–±—ã—Ç–∏–µ –≤ –ª–æ–≥–∞—Ö

---

### –®–∞–≥ 9: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh -p 2132 printfarm@kemomail3.keenetic.pro

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend
docker logs --tail 50 factory_v3-backend-1 | grep -i "webhook"

# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
# üì® Received SimplePrint webhook: event=test, webhook_id=123, timestamp=1730121600
# ‚úÖ Webhook processed successfully: test
```

–ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ Django shell:

```bash
docker exec -it factory_v3-backend-1 python manage.py shell

# –í Django shell:
from apps.simpleprint.models import PrinterWebhookEvent

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ
last = PrinterWebhookEvent.objects.order_by('-received_at').first()
if last:
    print(f"–°–æ–±—ã—Ç–∏–µ: {last.event_type}")
    print(f"–í—Ä–µ–º—è: {last.received_at}")
    print(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {last.processed}")
else:
    print("–°–æ–±—ã—Ç–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã - webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!")
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:

- [ ] **URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π**: `http://kemomail3.keenetic.pro:13000/api/v1/simpleprint/webhook/`
- [ ] **Webhook —Å–æ—Ö—Ä–∞–Ω–µ–Ω** –≤ SimplePrint UI
- [ ] **Webhook –∞–∫—Ç–∏–≤–µ–Ω** (—Å—Ç–∞—Ç—É—Å "Active" –∏–ª–∏ "Enabled")
- [ ] **–°–æ–±—ã—Ç–∏—è –≤—ã–±—Ä–∞–Ω—ã** (–º–∏–Ω–∏–º—É–º: job.started, job.finished, job.failed)
- [ ] **–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ** –∏–∑ SimplePrint UI
- [ ] **SimplePrint –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Å–ø–µ—Ö** (200 OK –∏–ª–∏ "Success")
- [ ] **–°–æ–±—ã—Ç–∏–µ –ø–æ—è–≤–∏–ª–æ—Å—å –≤ –ª–æ–≥–∞—Ö** Django (`üì® Received SimplePrint webhook`)
- [ ] **–°–æ–±—ã—Ç–∏–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å –≤ –ë–î** (`PrinterWebhookEvent.objects.count() > 0`)

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "Invalid URL" –∏–ª–∏ "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π URL"

**–ü—Ä–∏—á–∏–Ω–∞**: SimplePrint –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å HTTPS –¥–ª—è webhooks

**–†–µ—à–µ–Ω–∏–µ**: –°–º. –¥–æ–∫—É–º–µ–Ω—Ç `SIMPLEPRINT_WEBHOOK_FIX.md`:
- Cloudflare Tunnel (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- ngrok
- Let's Encrypt SSL

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "Connection failed" –∏–ª–∏ "Timeout"

**–ü—Ä–∏—á–∏–Ω–∞**: URL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
# –° –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (–ù–ï —Å —Å–µ—Ä–≤–µ—Ä–∞!)
curl -X POST http://kemomail3.keenetic.pro:13000/api/v1/simpleprint/webhook/ \
  -H "Content-Type: application/json" \
  -d '{"test": true}'

# –û–∂–∏–¥–∞–µ—Ç—Å—è: HTTP 200
# {"status":"received","event":"test","message":"Webhook processed successfully"}
```

**–ï—Å–ª–∏ timeout**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ (–ø–æ—Ä—Ç 13000 –æ—Ç–∫—Ä—ã—Ç?)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å –¥—Ä—É–≥–æ–π —Å–µ—Ç–∏ (–Ω–µ –ª–æ–∫–∞–ª—å–Ω–æ–π)

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: SimplePrint –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 404 Not Found

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**:
- ‚úÖ –ï—Å—Ç—å `/api/v1/simpleprint/webhook/` –≤ –∫–æ–Ω—Ü–µ
- ‚úÖ –ü–æ—Ä—Ç 13000, –ù–ï 18001
- ‚úÖ –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `http://`, –ù–ï `https://`

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: SimplePrint –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 500 Internal Server Error

**–ü—Ä–∏—á–∏–Ω–∞**: –û—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Django –Ω–∞ –æ—à–∏–±–∫–∏
docker logs --tail 100 factory_v3-backend-1 | grep -i "error"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend
docker restart factory_v3-backend-1
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 5: Webhook –ø—Ä–∏—Ö–æ–¥–∏—Ç, –Ω–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î

**–ü—Ä–∏—á–∏–Ω–∞ 1**: –°–æ–±—ã—Ç–∏—è –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ "unknown"

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ "unknown"
docker logs --tail 50 factory_v3-backend-1 | grep "Unknown event type"
```

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è –≤ `views.py` ‚Üí `event_mapping`

**–ü—Ä–∏—á–∏–Ω–∞ 2**: –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
docker exec factory_v3-backend-1 python manage.py showmigrations simpleprint
```

**–†–µ—à–µ–Ω–∏–µ**:
```bash
docker exec factory_v3-backend-1 python manage.py migrate simpleprint
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SimplePrint

–ï—Å–ª–∏ —Ä–∞–∑–¥–µ–ª Webhooks –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ:

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à –ø–ª–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏
- Webhooks –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤ –ø–ª–∞—Ç–Ω—ã—Ö –ø–ª–∞–Ω–∞—Ö
- –ò–ª–∏ —Ç—Ä–µ–±–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### 2. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É SimplePrint

**Email**: support@simplyprint.io

**–¢–µ–º–∞ –ø–∏—Å—å–º–∞**:
```
Webhooks feature availability request
```

**–¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞** (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º):
```
Hello SimplePrint Team,

I would like to use the Webhooks feature for real-time notifications
about printer and job events.

Could you please confirm:
1. Is the Webhooks feature available in my subscription plan?
2. If not, what plan includes Webhooks?
3. How can I enable Webhooks in my account?

My account details:
- Company ID: 27286
- User ID: 31471
- Email: [your_email]

Thank you for your assistance!

Best regards,
[Your Name]
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ API –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ webhooks (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

–ï—Å–ª–∏ UI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker exec factory_v3-backend-1 python manage.py register_webhooks

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫
docker exec factory_v3-backend-1 python manage.py register_webhooks --list
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤ Production**:
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—É—é –ø–µ—á–∞—Ç—å
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
   - –°–º. `SIMPLEPRINT_WEBHOOK_FIX.md`
   - Cloudflare Tunnel –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ HTTPS

3. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ WebSocket** (—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø):
   - Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ Planning V2
   - –ë–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

4. **–°–æ–∑–¥–∞–π—Ç–µ Frontend –≤–∫–ª–∞–¥–∫—É** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
   - –ü—Ä–æ—Å–º–æ—Ç—Ä webhook —Å–æ–±—ã—Ç–∏–π –≤ UI
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

## üìä –¢–µ–∫—É—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**:
- ‚úÖ 8+ webhook —Å–æ–±—ã—Ç–∏–π –ø–æ–ª—É—á–µ–Ω–æ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
- ‚úÖ 5 —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ 100% —Å–æ–±—ã—Ç–∏–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ (processed = True)
- ‚úÖ 0 –æ—à–∏–±–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è**:
- `job.started` ‚Üí `job_started` ‚úÖ
- `job.finished` ‚Üí `job_completed` ‚úÖ
- `job.paused` ‚Üí `job_paused` ‚úÖ
- `job.resumed` ‚Üí `job_resumed` ‚úÖ
- `job.failed` ‚Üí `job_failed` ‚úÖ
- `queue.changed` ‚Üí `queue_changed` ‚úÖ
- `queue.item_added` ‚Üí `queue_changed` ‚úÖ
- `queue.item_deleted` ‚Üí `queue_changed` ‚úÖ
- `queue.item_moved` ‚Üí `queue_changed` ‚úÖ
- `printer.online` ‚Üí `printer_online` ‚úÖ
- `printer.offline` ‚Üí `printer_offline` ‚úÖ
- `printer.state_changed` ‚Üí `printer_state_changed` ‚úÖ

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-10-28
**–ê–≤—Ç–æ—Ä**: Claude Code AI
**–°—Ç–∞—Ç—É—Å**: Production Ready ‚úÖ
